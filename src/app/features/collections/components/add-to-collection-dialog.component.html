<h2 mat-dialog-title>Adicionar a Coleção</h2>

<mat-dialog-content>
  <p class="movie-count">
    Adicionando {{ data.movies.length }} filme(s) à(s) seguinte(s) coleção(ões):
  </p>

  <mat-list>
    @for (collection of collections; track collection.id) {
      <mat-list-item class="collection-item">
        <mat-checkbox
          [checked]="isCollectionSelected(collection.id)"
          (change)="toggleCollection(collection.id)"
        >
          <div class="collection-info">
            <span class="collection-title">{{ collection.title }}</span>
            <span class="collection-count">({{ collection.movies?.length || 0 }} filmes)</span>
          </div>
        </mat-checkbox>
      </mat-list-item>
    }
  </mat-list>

  @if (collections.length === 0) {
    <div class="no-collections-container">
      <p class="no-collections">
        Nenhuma coleção criada ainda. Crie uma coleção antes de adicionar filmes.
      </p>
      <button mat-raised-button color="primary" (click)="createNewCollection()" class="create-btn">
        <mat-icon>add</mat-icon>
        Criar Nova Coleção
      </button>
    </div>
  }
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="dialogRef.close()">Cancelar</button>
  <button
    mat-raised-button
    color="primary"
    [disabled]="selectedCollectionIds.size === 0 || collections.length === 0"
    (click)="addToSelectedCollections()"
  >
    Adicionar
  </button>
</mat-dialog-actions>
