<h2 mat-dialog-title>Add to Collection</h2>

<mat-dialog-content>
  <p class="movie-count">
    Adding {{ data.movies.length }} movie(s) to the following collection(s):
  </p>

  <mat-list>
    @for (collection of collections; track collection.id) {
      <mat-list-item class="collection-item">
        <mat-checkbox
          [checked]="isCollectionSelected(collection.id)"
          (change)="toggleCollection(collection.id)"
        >
          <div class="collection-info">
            <span class="collection-title">{{ collection.title }}</span>
            <span class="collection-count">({{ collection.movies?.length || 0 }} movies)</span>
          </div>
        </mat-checkbox>
      </mat-list-item>
    }
  </mat-list>

  @if (collections.length === 0) {
    <div class="no-collections-container">
      <p class="no-collections">
        No collection created yet. Create a collection before adding movies.
      </p>
      <button mat-raised-button color="primary" (click)="createNewCollection()" class="create-btn">
        <mat-icon>add</mat-icon>
        Create New Collection
      </button>
    </div>
  }
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="dialogRef.close()">Cancel</button>
  <button
    mat-raised-button
    color="primary"
    [disabled]="selectedCollectionIds.size === 0 || collections.length === 0"
    (click)="addToSelectedCollections()"
  >
    Add
  </button>
</mat-dialog-actions>
